<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All order Products </title>
    <link rel="stylesheet" href="dashboard.css">
</head>
<body>
    <div id="product-div">
        <h1 id="heading">All Order</h1>
        <table>
            <!-- Dont change order of columns -->
            <thead>
                <tr>

                    <th>Title</th>
                    <th>Image</th>
                    <th>Price</th>
                    <th>Description</th>
                    <th>User ID</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                <!-- Append your output to tbody -->

            </tbody>
        </table>
    </div>
</body>
</html>

<script>

fetch("https://wandering-pig-snaps.cyclic.app/admintask/getorderitem", {
        headers: {
            "Authorization": localStorage.getItem("token")
        }
    }).then((res) => { return (res.json()) }).then((data) => {
        display(data)
    }).catch((err) => {
        console.log(err);
    })



    
    function display(data) {
        let c=0;
        let tbody = document.querySelector("tbody");
        tbody.innerHTML = "";
        data.forEach(element => {
            c++;
            let row = document.createElement("tr");

            let title = document.createElement("td");
            title.innerText = element.name;
            let image = document.createElement("img");
            image.setAttribute("src", element.image);
            image.setAttribute("class", "image")
            let price = document.createElement("td");
            price.innerText = element.price;
            let description = document.createElement("td");
            description.innerText = element.description;
            let rating = document.createElement("td");
            rating.innerText = element.userId;

            let control = document.createElement("td");
            let butDelet = document.createElement("button");
           if(c%3==0){
            butDelet.innerText = "Pending";
           }else if(c%2==0){
            butDelet.innerText = "on Processing";
           }else{
            butDelet.innerText = "Delivered";
           }
            butDelet.setAttribute("id", "blue");

           
            
            control.append(butDelet)
            row.append(title, image, price, description, rating, control);
            tbody.append(row)

        });
    }
</script>